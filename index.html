<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>สุ่มเหล่า 3 เหล่า</title>
<link href="https://fonts.googleapis.com/css2?family=Itim&display=swap" rel="stylesheet">
<style>
body { font-family: 'Itim', cursive; background:#f5f0e6; display:flex; justify-content:center; align-items:center; height:100vh; }
.container { background:white; padding:30px; border-radius:20px; box-shadow:0 0 20px rgba(0,0,0,0.2); text-align:center; width:400px;}
input { margin:10px 0; padding:10px; width:90%; border-radius:5px; border:1px solid #ccc;}
button { padding:10px 20px; border:none; border-radius:5px; background-color:#6b3e26; color:white; cursor:pointer;}
img { margin-top:20px; max-width:100%; border-radius:15px; }
</style>
</head>
<body>
<div class="container">
<h1>สุ่มเหล่า 3 เหล่า</h1>
<input type="text" id="name" placeholder="ชื่อ-นามสกุล">
<input type="text" id="account" placeholder="Account">
<button onclick="randomClan()">สุ่มเหล่า</button>
<div id="result"></div>
</div>

<script>
const clans = [
  {name: "เหล่าราชหัสดิน", img: "เหล่าราชหัสดิน.png"},
  {name: "เหล่าชลาศัย", img: "เหล่าชลาศัย.png"},
  {name: "เหล่าจตุรงค์", img: "เหล่าจตุรงค์.png"}
];

function randomClan() {
  const name = document.getElementById("name").value.trim();
  const account = document.getElementById("account").value.trim();
  if(!name || !account){ alert("กรุณากรอกชื่อและ account"); return; }

  const randomIndex = Math.floor(Math.random()*clans.length);
  const selected = clans[randomIndex];

  document.getElementById("result").innerHTML = `
    <h2>${name}, คุณได้เข้าสู่ ${selected.name}</h2>
    <img src="${selected.img}" alt="${selected.name}">
  `;

  saveData(name, account, selected.name);
}

function saveData(name, account, clan) {
  fetch("https://script.google.com/macros/s/AKfycbz_yRK_lEVAMhCWEBFHkHyQPV_eNRlaVvGxFJbQ0xkuZP8qT88hWEnSek9flf_Qu3Kl/exec", {  // เปลี่ยนเป็น URL ของคุณ
    method: "POST",
    body: JSON.stringify({name, account, clan}),
    headers: { "Content-Type": "application/json" }
  })
  .then(response => response.json())
  .then(data => {
    if(data.status === "error") {
      alert(data.message);
      document.getElementById("result").innerHTML = "";
    }
  });
}
</script>
</body>
</html>
